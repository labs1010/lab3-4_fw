{"version":3,"file":"bundle.js","mappings":"mBAAO,MAAMA,EAGF,kBAAOC,GAGV,OAFKC,KAAKC,YAAWD,KAAKC,UAAY,IAAIH,GAEnCE,KAAKC,SAChB,CAEA,WAAAC,GACkBC,SAASC,cAAc,UAC/BC,MAAMC,gBAAkB,oBAClC,CAEO,IAAAC,CAAKC,GACR,MAAMC,EAAQN,SAASC,cAAc,UAE/BM,EAAeP,SAASQ,cAAc,OAC5CD,EAAaE,UAAY,gBAEzB,MAAMC,EAAcV,SAASQ,cAAc,OAC3CE,EAAYD,UAAY,oCAExB,MAAME,EAAYX,SAASQ,cAAc,OACzCG,EAAUF,UAAY,aACtBE,EAAUC,YAAcP,EAExB,MAAMQ,EAAcb,SAASQ,cAAc,OAC3CK,EAAYJ,UAAY,eAExB,MAAMK,EAASd,SAASQ,cAAc,UACtCM,EAAOC,KAAO,SACdD,EAAOL,UAAY,kBACnBK,EAAOE,iBAAiB,QAASnB,KAAKoB,MAEtC,MAAMC,EAAMlB,SAASQ,cAAc,OACnCU,EAAIC,IAAM,iBACVD,EAAIE,IAAM,MACVF,EAAIT,UAAY,kBAEhBK,EAAOO,YAAYH,GACnBL,EAAYQ,YAAYP,GAExBP,EAAac,YAAYV,GACzBJ,EAAac,YAAYR,GAEzBH,EAAYW,YAAYd,GAExBD,EAAMgB,UAAY,GAClBhB,EAAMe,YAAYX,GAElBb,KAAK0B,QACT,CAEO,KAAAC,GACH,MAAMlB,EAAQN,SAASC,cAAc,UAE/BS,EAAcV,SAASQ,cAAc,OAC3CE,EAAYD,UAAY,qCAExB,MAAMF,EAAeP,SAASQ,cAAc,OAC5CD,EAAaE,UAAY,gBAEzB,MAAMgB,EAAczB,SAASQ,cAAc,OAC3CiB,EAAYhB,UAAY,eAExB,MAAMiB,EAAa1B,SAASQ,cAAc,MAC1CkB,EAAWjB,UAAY,cACvBiB,EAAWd,YAAc,8CAEzB,MAAMe,EAAc3B,SAASQ,cAAc,UAC3CmB,EAAYZ,KAAO,SACnBY,EAAYlB,UAAY,YACxBkB,EAAYC,aAAa,kBAAmB,SAC5CD,EAAYC,aAAa,aAAc,SACvCD,EAAYX,iBAAiB,QAASnB,KAAKoB,MAE3CQ,EAAYJ,YAAYK,GACxBD,EAAYJ,YAAYM,GAExB,MAAME,EAAa7B,SAASQ,cAAc,QAC1CqB,EAAWpB,UAAY,mBACvBoB,EAAWC,YAAa,EACxBD,EAAWE,KAAO,cAClBF,EAAWG,GAAK,cAEhB,MAAMrB,EAAYX,SAASQ,cAAc,OACzCG,EAAUF,UAAY,aAEtB,MAAMwB,EAAajC,SAASQ,cAAc,SAC1CyB,EAAWlB,KAAO,OAClBkB,EAAWxB,UAAY,eACvBwB,EAAWC,QAAU,OACrBD,EAAWE,YAAc,KACzBF,EAAWG,UAAW,EAEtBzB,EAAUU,YAAYY,GAEtB,MAAMpB,EAAcb,SAASQ,cAAc,OAC3CK,EAAYJ,UAAY,eAExB,MAAM4B,EAAerC,SAASQ,cAAc,UAC5C6B,EAAatB,KAAO,SACpBsB,EAAa5B,UAAY,oBACzB4B,EAAaT,aAAa,kBAAmB,SAC7CS,EAAazB,YAAc,YAC3ByB,EAAarB,iBAAiB,QAASnB,KAAKoB,MAE5C,MAAMqB,EAAatC,SAASQ,cAAc,UAC1C8B,EAAWvB,KAAO,SAClBuB,EAAW7B,UAAY,kBACvB6B,EAAW1B,YAAc,WAEzBC,EAAYQ,YAAYgB,GACxBxB,EAAYQ,YAAYiB,GAExBT,EAAWR,YAAYV,GACvBkB,EAAWR,YAAYR,GAEvBN,EAAac,YAAYI,GACzBlB,EAAac,YAAYQ,GAEzBnB,EAAYW,YAAYd,GAExBD,EAAMgB,UAAY,GAClBhB,EAAMe,YAAYX,GAElBb,KAAK0B,QACT,CAEQ,MAAAA,GACJ,MAAMjB,EAAQN,SAASC,cAAc,UAErCK,EAAMiC,UAAUC,IAAI,QACpBxC,SAASyC,KAAKF,UAAUC,IAAI,cAC5BlC,EAAMJ,MAAMwC,QAAU,QACtBpC,EAAMqC,WAAa,QACnBrC,EAAMsC,UAAY,OAClBtC,EAAMuC,KAAO,QACjB,CAEQ,IAAA5B,GACJ,MAAMX,EAAQN,SAASC,cAAc,UAErCK,EAAMiC,UAAUO,OAAO,QACvBxC,EAAMJ,MAAMwC,QAAU,OACtB1C,SAASyC,KAAKF,UAAUO,OAAO,cAC/BxC,EAAMqC,WAAa,OACnBrC,EAAMsC,UAAY,QAClBtC,EAAMuC,KAAO,EACjB,EC9IG,MAAME,EAOT,WAAAhD,CAAYiC,EAAYD,EAAciB,EAAgBC,GAF9C,KAAAC,SAAmB,EAGvBrD,KAAKmC,GAAKA,EACVnC,KAAKkC,KAAOA,EACZlC,KAAKmD,OAASA,EACdnD,KAAKoD,YAAcA,CACvB,CAEA,SAAIE,GACA,OAAOtD,KAAKmC,EAChB,CAEA,WAAIoB,GACA,OAAOvD,KAAKkC,IAChB,CAEA,aAAIsB,GACA,OAAOxD,KAAKmD,MAChB,CAEA,kBAAIM,GACA,OAAOzD,KAAKoD,WAChB,CAEA,eAAIM,GACA,OAAO1D,KAAKqD,QAChB,CAEA,UAAAM,GACI,OAAwB,GAAjB3D,KAAKqD,QAChB,CAEA,MAAAO,CAAOC,GACH7D,KAAKqD,SAAWQ,CACpB,CAEA,SACI7D,KAAKqD,SAAW,CACpB,EASG,MAAMS,EAMT,WAAA5D,CAAYiC,EAAYD,EAAc6B,GAF9B,KAAAC,cAAwB,EAG5BhE,KAAKmC,GAAKA,EACVnC,KAAKkC,KAAOA,EACZlC,KAAK+D,MAAQA,CACjB,CAEA,SAAIT,GACA,OAAOtD,KAAKmC,EAChB,CAEA,WAAIoB,GACA,OAAOvD,KAAKkC,IAChB,CAEA,YAAI+B,GACA,OAAOjE,KAAK+D,KAChB,CAEO,UAAAG,CAAWC,GACd,QAAInE,KAAKgE,cAAgB,GAAKG,EAAKR,eAGnC3D,KAAKgE,gBACLG,EAAKP,OAAO5D,KAAKmC,IACV,GACX,CAEO,UAAAiC,GACH,OAAIpE,KAAKgE,cAAgB,IACrBhE,KAAKgE,iBACE,EAGf,ECpGG,MAAMK,EAGT,WAAAnE,CAAYoE,EAAW,IACnBtE,KAAKuE,SAAWD,CACpB,CAEA,GAAAE,GACI,OAAOxE,KAAKuE,QAChB,CAEA,GAAA5B,CAAI8B,GACAzE,KAAKuE,SAASG,KAAKD,EACvB,CAEA,MAAAxB,CAAOwB,GACH,GAAWE,MAAPF,EAAkB,CAClB,MAAMG,EAAQ5E,KAAKuE,SAASM,QAAQJ,GACpC,IAAe,IAAXG,EAAc,OAClB5E,KAAKuE,SAASO,OAAOF,EAAO,EAChC,CACJ,CAEA,MAAAG,CAAOC,EAAuBC,GAC1B,GAAcN,MAAVK,EAAqB,CACrB,MAAMJ,EAAQ5E,KAAKuE,SAASM,QAAQG,GACpC,IAAe,IAAXJ,EAAc,OAClB5E,KAAKuE,SAASK,GAASK,CAC3B,CACJ,CAEA,MAAAC,CAAOC,GACH,OAAOnF,KAAKuE,SAASa,KAAKD,EAC9B,ECjCG,MAAME,EACT,UAAOC,CAAIC,EAAaC,GACpBC,aAAaC,QAAQH,EAAKC,EAC9B,CAEA,UAAOhB,CAAIe,GACP,OAAOE,aAAaE,QAAQJ,EAChC,CAEA,aAAOtC,CAAOsC,GACVE,aAAaG,WAAWL,EAC5B,CAEA,YAAOM,GACHJ,aAAaI,OACjB,ECXG,MAAMC,EAKF,kBAAO/F,GAGV,OAFKC,KAAKC,YAAWD,KAAKC,UAAY,IAAI6F,GAEnC9F,KAAKC,SAChB,CAEA,WAAAC,G,QACI,MAAM6F,EAAeC,KAAKC,MAA0B,QAApB,EAAAZ,EAAQb,IAAI,gBAAQ,QAAI,MAClD0B,EAAeF,KAAKC,MAA0B,QAApB,EAAAZ,EAAQb,IAAI,gBAAQ,QAAI,MAEpD2B,MAAMC,QAAQL,IAAiBI,MAAMC,QAAQF,IAC7CG,QAAQC,IAAI,4BACZtG,KAAKuG,OAAS,IAAIlC,EAAc0B,GAChC/F,KAAKwG,OAAS,IAAInC,EAAc6B,KAEhCG,QAAQC,IAAI,kDACZjB,EAAQQ,QACR7F,KAAKuG,OAAS,IAAIlC,EAClBrE,KAAKwG,OAAS,IAAInC,GAGtBoC,OAAOtF,iBAAiB,eAAgB,KACpCkE,EAAQC,IAAI,QAASU,KAAKU,UAAU1G,KAAKuG,OAAO/B,QAChDa,EAAQC,IAAI,QAASU,KAAKU,UAAU1G,KAAKwG,OAAOhC,SAExD,CAEO,QAAAmC,GACH,OAAO3G,KAAKuG,OAAO/B,KACvB,CAEO,QAAAoC,GACH,OAAO5G,KAAKwG,OAAOhC,KACvB,CAEO,OAAAqC,CAAQ1C,GACXnE,KAAKuG,OAAO5D,IAAIwB,EACpB,CAEO,OAAA2C,CAAQC,GACX/G,KAAKwG,OAAO7D,IAAIoE,EACpB,CAEO,UAAAC,CAAWC,GACdjH,KAAKuG,OAAOtD,OACRjD,KAAKuG,OAAOrB,OAAQf,GAAeA,EAAKZ,UAAY0D,GAE5D,CAEO,UAAAC,CAAWC,GACdnH,KAAKwG,OAAOvD,OACRjD,KAAKwG,OAAOtB,OAAQ6B,GAAeA,EAAKzD,QAAU6D,GAE1D,CAEO,UAAAC,CAAWC,EAAmBC,GACjC,MAAMC,EAAUvH,KAAKuG,OAAOrB,OACvBf,GAAeA,EAAKb,QAAU+D,GAEnCrH,KAAKuG,OAAOxB,OAAOwC,EAASD,EAChC,CAEO,UAAAE,CAAWC,EAAmBC,GACjC,MAAMC,EAAU3H,KAAKwG,OAAOtB,OACvB6B,GAAeA,EAAKzD,QAAUmE,GAEnCzH,KAAKwG,OAAOzB,OAAO4C,EAASD,EAChC,CAEO,QAAAE,CAASX,GACZ,OAAOjH,KAAKuG,OAAOrB,OAAQf,GAAeA,EAAKZ,UAAY0D,EAC/D,CAEO,QAAAY,CAASV,GACZ,OAAOnH,KAAKwG,OAAOtB,OAAQ6B,GAAeA,EAAKzD,QAAU6D,EAC7D,ECpFG,MAAMW,EAGF,kBAAO/H,GAGV,OAFKC,KAAKC,YAAWD,KAAKC,UAAY,IAAI6H,GAEnC9H,KAAKC,SAChB,CAEA,YAAA8H,CAAaC,GACT,QAAKA,EAAKC,mBAIVD,EAAKtF,UAAUC,IAAI,kBACZ,EACX,ECRJ,MAAMuF,EAKF,WAAAhI,GACIF,KAAKmI,YAAcL,EAAW/H,cAC9BC,KAAKoI,SAAWtC,EAAe/F,cAC/BC,KAAKqI,OAASvI,EAAMC,cACpBC,KAAKsI,WAEL,MAAMC,EAAcpI,SAASqI,MAAMC,UAC/B,YAEEC,EAAcvI,SAASqI,MAAMC,UAC/B,YAGJF,EAAYpH,iBAAiB,SAAWwH,IAGpC,GAFAA,EAAEC,iBAEE5I,KAAKmI,YAAYJ,aAAaQ,GAAc,CAC5C,MAAMpG,EAAK0G,KAAKC,MACV5G,EAAOqG,EAAY,aAAa/C,MAChCrC,EAASoF,EAAY,eAAe/C,MACpCpC,EAAc2F,SAASR,EAAY,gBAAgB/C,OAEnDrB,EAAO,IAAIjB,EAAKf,EAAID,EAAMiB,EAAQC,GACxCpD,KAAKoI,SAASvB,QAAQ1C,GAEtBoE,EAAYS,QACZT,EAAY7F,UAAUO,OAAO,iBAC7BjD,KAAKsI,UACT,IAGJI,EAAYvH,iBAAiB,SAAWwH,IAGpC,GAFAA,EAAEC,iBAEE5I,KAAKmI,YAAYJ,aAAaW,GAAc,CAC5C,MAAMxG,EAAOwG,EAAY,aAAalD,MAChCzB,EAAQ2E,EAAY,cAAclD,MAClCrD,EAAK0G,KAAKC,MAEV/B,EAAO,IAAIjD,EAAK3B,EAAID,EAAM6B,GAChC/D,KAAKoI,SAAStB,QAAQC,GAEtB2B,EAAYM,QACZN,EAAYhG,UAAUO,OAAO,iBAC7BjD,KAAKsI,UACT,GAER,CAEA,QAAAA,GACI,MAAMlE,EAAcD,IAChB,MAAM4C,EAAO/G,KAAKoI,SACbxB,WACAxB,KAAM6D,GAAMA,EAAE3F,QAAUa,EAAKT,aAClCwF,OAAOC,eAAehF,EAAMjB,EAAKkG,WACjCF,OAAOC,eAAepC,EAAMjD,EAAKsF,WAC7BrC,GAAQA,EAAK3C,cAAgBD,EAAKR,cAClCQ,EAAKkF,SAELrJ,KAAKoI,SAAShB,WAAWjD,EAAKb,MAAOa,GACrCnE,KAAKoI,SAASZ,WAAWT,EAAKzD,MAAOyD,GAErC/G,KAAKqI,OAAO9H,KACR,GAAG4D,EAAKZ,cAAcY,EAAKX,cAAcW,EAAKV,kDAAkDsD,EAAKzD,SAASyD,EAAKxD,YAAYwD,EAAK9C,cAExIjE,KAAKsI,YAELtI,KAAKqI,OAAO9H,KAAK,gCAInB2D,EAAcC,IAChBnE,KAAKqI,OAAO1G,QAEZ,MAkCMqG,EAAO7H,SAASmJ,eAAe,eACrCtB,SAAAA,EAAM7G,iBAAiB,SAnCDwH,IAClBA,EAAEC,iBACFvC,QAAQC,IAAI,KAEZ,MAAM0B,EAAOW,EAAEY,OACf,GAAIvJ,KAAKmI,YAAYJ,aAAaC,GAAO,CACrC,MAAMb,EAAS4B,SACVf,EAAK,GAAwBxC,OAE5BuB,EAAO/G,KAAKoI,SAASP,SAASV,GAChCJ,GACAmC,OAAOC,eAAehF,EAAMjB,EAAKkG,WACjCF,OAAOC,eAAepC,EAAMjD,EAAKsF,WAE7BrC,GAAQA,EAAK7C,WAAWC,IACxBkC,QAAQC,IAAI,KACZtG,KAAKoI,SAAShB,WAAWjD,EAAKb,MAAOa,GACrCnE,KAAKoI,SAASZ,WAAWT,EAAKzD,MAAOyD,GACrC/G,KAAKqI,OAAO9H,KACR,GAAG4D,EAAKZ,cAAcY,EAAKX,cAAcW,EAAKV,iDAAiDsD,EAAKzD,SAASyD,EAAKxD,YAAYwD,EAAK9C,cAEvIjE,KAAKsI,aAELjC,QAAQC,IAAI,KACZtG,KAAKqI,OAAO9H,KACR,wGAIRP,KAAKqI,OAAO9H,KAAK,gCAEzB,KAQFiJ,EAAWrJ,SAASmJ,eAAe,aACzCE,EAAS/H,UAAY,GACrBzB,KAAKoI,SAASzB,WAAW8C,QAAStF,IAC9B+E,OAAOC,eAAehF,EAAMjB,EAAKkG,WACjC,MAAMM,EAAWvJ,SAASQ,cAAc,OACxC+I,EAAS9I,UACL,uEAEJ,MAAM+I,EAAWxJ,SAASQ,cAAc,QACxCgJ,EAAS5I,YAAc,GAAGoD,EAAKZ,cAAcY,EAAKX,cAAcW,EAAKV,kBAErE,MAAMmG,EAAezJ,SAASQ,cAAc,UAC5CiJ,EAAahJ,UAAYuD,EAAKR,aACxB,kBACA,kBACNiG,EAAa1I,KAAO,SACpB0I,EAAa7I,YAAcoD,EAAKR,aAC1B,YACA,WAEFQ,EAAKR,aACLiG,EAAazI,iBAAiB,QAAS,IAAMiD,EAAWD,IAExDyF,EAAazI,iBAAiB,QAAS,IAAM+C,EAAWC,IAG5DuF,EAASlI,YAAYmI,GACrBD,EAASlI,YAAYoI,GACrBJ,EAAShI,YAAYkI,KAGzB,MAAMG,EAAW1J,SAASmJ,eAAe,aACzCO,EAASpI,UAAY,GACrBzB,KAAKoI,SAASxB,WAAW6C,QAAS1C,IAC9BmC,OAAOC,eAAepC,EAAMjD,EAAKsF,WACjCS,EAASpI,WAAa,2GAENsF,EAAKzD,SAASyD,EAAKxD,YAAYwD,EAAK9C,0DAI5D,EAGJ9D,SAASgB,iBAAiB,mBAAoB,KAC1C,IAAI+G,G","sources":["webpack://lab3-library-app/./src/modal.ts","webpack://lab3-library-app/./src/models.ts","webpack://lab3-library-app/./src/library.ts","webpack://lab3-library-app/./src/storage.ts","webpack://lab3-library-app/./src/services.ts","webpack://lab3-library-app/./src/validation.ts","webpack://lab3-library-app/./src/app.ts"],"sourcesContent":["export class Modal {\n    private static _instance: Modal;\n\n    public static getInstance(): Modal {\n        if (!this._instance) this._instance = new Modal();\n\n        return this._instance;\n    }\n\n    constructor() {\n        const modal = document.querySelector(\".modal\") as HTMLDivElement;\n        modal.style.backgroundColor = \"rgba(0, 0, 0, 0.5)\";\n    }\n\n    public show(message: string): void {\n        const modal = document.querySelector(\".modal\") as HTMLDivElement;\n\n        const modalContent = document.createElement(\"div\");\n        modalContent.className = \"modal-content\";\n\n        const modalDialog = document.createElement(\"div\");\n        modalDialog.className = \"modal-dialog modal-dialog-centerd\";\n\n        const modalBody = document.createElement(\"div\");\n        modalBody.className = \"modal-body\";\n        modalBody.textContent = message;\n\n        const modalFooter = document.createElement(\"div\");\n        modalFooter.className = \"modal-footer\";\n\n        const button = document.createElement(\"button\");\n        button.type = \"button\";\n        button.className = \"btn btn-primary\";\n        button.addEventListener(\"click\", this.hide);\n\n        const img = document.createElement(\"img\");\n        img.src = \"assets/pon.gif\";\n        img.alt = \"Pon\";\n        img.className = \"w-100 img-fluid\";\n\n        button.appendChild(img);\n        modalFooter.appendChild(button);\n\n        modalContent.appendChild(modalBody);\n        modalContent.appendChild(modalFooter);\n\n        modalDialog.appendChild(modalContent);\n\n        modal.innerHTML = \"\";\n        modal.appendChild(modalDialog);\n\n        this.appear();\n    }\n\n    public askId(): void {\n        const modal = document.querySelector(\".modal\") as HTMLDivElement;\n\n        const modalDialog = document.createElement(\"div\");\n        modalDialog.className = \"modal-dialog modal-dialog-centered\";\n\n        const modalContent = document.createElement(\"div\");\n        modalContent.className = \"modal-content\";\n\n        const modalHeader = document.createElement(\"div\");\n        modalHeader.className = \"modal-header\";\n\n        const modalTitle = document.createElement(\"h5\");\n        modalTitle.className = \"modal-title\";\n        modalTitle.textContent = \"Введіть ID користувача для позичення книги:\";\n\n        const closeButton = document.createElement(\"button\");\n        closeButton.type = \"button\";\n        closeButton.className = \"btn-close\";\n        closeButton.setAttribute(\"data-bs-dismiss\", \"modal\");\n        closeButton.setAttribute(\"aria-label\", \"Close\");\n        closeButton.addEventListener(\"click\", this.hide);\n\n        modalHeader.appendChild(modalTitle);\n        modalHeader.appendChild(closeButton);\n\n        const borrowForm = document.createElement(\"form\");\n        borrowForm.className = \"needs-validation\";\n        borrowForm.noValidate = true;\n        borrowForm.name = \"borrow-form\";\n        borrowForm.id = \"borrow-form\";\n\n        const modalBody = document.createElement(\"div\");\n        modalBody.className = \"modal-body\";\n\n        const inputField = document.createElement(\"input\");\n        inputField.type = \"text\";\n        inputField.className = \"form-control\";\n        inputField.pattern = \"\\\\d+\";\n        inputField.placeholder = \"ID\";\n        inputField.required = true;\n\n        modalBody.appendChild(inputField);\n\n        const modalFooter = document.createElement(\"div\");\n        modalFooter.className = \"modal-footer\";\n\n        const cancelButton = document.createElement(\"button\");\n        cancelButton.type = \"button\";\n        cancelButton.className = \"btn btn-secondary\";\n        cancelButton.setAttribute(\"data-bs-dismiss\", \"modal\");\n        cancelButton.textContent = \"Скасувати\";\n        cancelButton.addEventListener(\"click\", this.hide);\n\n        const saveButton = document.createElement(\"button\");\n        saveButton.type = \"submit\";\n        saveButton.className = \"btn btn-primary\";\n        saveButton.textContent = \"Зберегти\";\n\n        modalFooter.appendChild(cancelButton);\n        modalFooter.appendChild(saveButton);\n\n        borrowForm.appendChild(modalBody);\n        borrowForm.appendChild(modalFooter);\n\n        modalContent.appendChild(modalHeader);\n        modalContent.appendChild(borrowForm);\n\n        modalDialog.appendChild(modalContent);\n\n        modal.innerHTML = \"\";\n        modal.appendChild(modalDialog);\n\n        this.appear();\n    }\n\n    private appear(): void {\n        const modal = document.querySelector(\".modal\") as HTMLDivElement;\n\n        modal.classList.add(\"show\");\n        document.body.classList.add(\"modal-open\");\n        modal.style.display = \"block\";\n        modal.ariaHidden = \"false\";\n        modal.ariaModal = \"true\";\n        modal.role = \"dialog\";\n    }\n\n    private hide(): void {\n        const modal = document.querySelector(\".modal\") as HTMLDivElement;\n\n        modal.classList.remove(\"show\");\n        modal.style.display = \"none\";\n        document.body.classList.remove(\"modal-open\");\n        modal.ariaHidden = \"true\";\n        modal.ariaModal = \"false\";\n        modal.role = \"\";\n    }\n}\n","export interface IBook {\n    getId: number;\n    getName: string;\n    getAuthor: string;\n    getReleaseYear: number;\n    isBorrowed(): boolean;\n}\n\nexport class Book implements IBook {\n    private id: number;\n    private name: string;\n    private author: string;\n    private releaseYear: number;\n    private borrower: number = 0;\n\n    constructor(id: number, name: string, author: string, releaseYear: number) {\n        this.id = id;\n        this.name = name;\n        this.author = author;\n        this.releaseYear = releaseYear;\n    }\n\n    get getId(): number {\n        return this.id;\n    }\n\n    get getName(): string {\n        return this.name;\n    }\n\n    get getAuthor(): string {\n        return this.author;\n    }\n\n    get getReleaseYear(): number {\n        return this.releaseYear;\n    }\n\n    get getBorrower(): number {\n        return this.borrower;\n    }\n\n    isBorrowed(): boolean {\n        return this.borrower != 0;\n    }\n\n    borrow(borrowerId: number): void {\n        this.borrower = borrowerId;\n    }\n\n    return(): void {\n        this.borrower = 0;\n    }\n}\n\nexport interface IUser {\n    getId: number;\n    getName: string;\n    getEmail: string;\n}\n\nexport class User implements IUser {\n    private id: number;\n    private name: string;\n    private email: string;\n    private borrowedBooks: number = 0;\n\n    constructor(id: number, name: string, email: string) {\n        this.id = id;\n        this.name = name;\n        this.email = email;\n    }\n\n    get getId(): number {\n        return this.id;\n    }\n\n    get getName(): string {\n        return this.name;\n    }\n\n    get getEmail(): string {\n        return this.email;\n    }\n\n    public borrowBook(book: Book): boolean {\n        if (this.borrowedBooks > 3 || book.isBorrowed()) {\n            return false;\n        }\n        this.borrowedBooks++;\n        book.borrow(this.id);\n        return true;\n    }\n\n    public returnBook(): boolean {\n        if (this.borrowedBooks > 0) {\n            this.borrowedBooks--;\n            return true;\n        }\n        return false;\n    }\n}\n","export class Library<T> {\n    private _objects: T[];\n\n    constructor(arr: T[] = []) {\n        this._objects = arr;\n    }\n\n    get(): T[] {\n        return this._objects;\n    }\n\n    add(obj: T): void {\n        this._objects.push(obj);\n    }\n\n    remove(obj: T | undefined): void {\n        if (obj != undefined) {\n            const index = this._objects.indexOf(obj);\n            if (index === -1) return;\n            this._objects.splice(index, 1);\n        }\n    }\n\n    update(oldObj: T | undefined, newObj: T): void {\n        if (oldObj != undefined) {\n            const index = this._objects.indexOf(oldObj);\n            if (index === -1) return;\n            this._objects[index] = newObj;\n        }\n    }\n\n    search(predicate: (obj: T) => boolean): T | undefined {\n        return this._objects.find(predicate);\n    }\n}\n","export class Storage {\n    static set(key: string, value: string): void {\n        localStorage.setItem(key, value);\n    }\n\n    static get(key: string): string | null {\n        return localStorage.getItem(key);\n    }\n\n    static remove(key: string): void {\n        localStorage.removeItem(key);\n    }\n\n    static clear(): void {\n        localStorage.clear();\n    }\n}\n","import { Book, User } from \"./models\";\nimport { Library } from \"./library\";\nimport { Storage } from \"./storage\";\n\nexport class LibraryService {\n    private _books: Library<Book>;\n    private _users: Library<User>;\n    private static _instance: LibraryService;\n\n    public static getInstance(): LibraryService {\n        if (!this._instance) this._instance = new LibraryService();\n\n        return this._instance;\n    }\n\n    constructor() {\n        const storageBooks = JSON.parse(Storage.get(\"books\") ?? \"[]\") as Book[];\n        const storageUsers = JSON.parse(Storage.get(\"users\") ?? \"[]\") as User[];\n\n        if (Array.isArray(storageBooks) && Array.isArray(storageUsers)) {\n            console.log(\"Data loaded from storage\");\n            this._books = new Library<Book>(storageBooks);\n            this._users = new Library<User>(storageUsers);\n        } else {\n            console.log(\"No data in storage, initializing empty library\");\n            Storage.clear();\n            this._books = new Library<Book>();\n            this._users = new Library<User>();\n        }\n\n        window.addEventListener(\"beforeunload\", () => {\n            Storage.set(\"books\", JSON.stringify(this._books.get()));\n            Storage.set(\"users\", JSON.stringify(this._users.get()));\n        });\n    }\n\n    public getBooks(): Book[] {\n        return this._books.get();\n    }\n\n    public getUsers(): User[] {\n        return this._users.get();\n    }\n\n    public addBook(book: Book): void {\n        this._books.add(book);\n    }\n\n    public addUser(user: User): void {\n        this._users.add(user);\n    }\n\n    public removeBook(bookName: string): void {\n        this._books.remove(\n            this._books.search((book: Book) => book.getName === bookName),\n        );\n    }\n\n    public removeUser(userId: number): void {\n        this._users.remove(\n            this._users.search((user: User) => user.getId === userId),\n        );\n    }\n\n    public updateBook(oldBookId: number, newBook: Book): void {\n        const oldBook = this._books.search(\n            (book: Book) => book.getId === oldBookId,\n        );\n        this._books.update(oldBook, newBook);\n    }\n\n    public updateUser(oldUserId: number, newUser: User): void {\n        const oldUser = this._users.search(\n            (user: User) => user.getId === oldUserId,\n        );\n        this._users.update(oldUser, newUser);\n    }\n\n    public findBook(bookName: string): Book | undefined {\n        return this._books.search((book: Book) => book.getName === bookName);\n    }\n\n    public findUser(userId: number): User | undefined {\n        return this._users.search((user: User) => user.getId === userId);\n    }\n}\n","export class Validation {\n    private static _instance: Validation;\n\n    public static getInstance(): Validation {\n        if (!this._instance) this._instance = new Validation();\n\n        return this._instance;\n    }\n\n    validateForm(form: HTMLFormElement): boolean {\n        if (!form.reportValidity()) {\n            return false;\n        }\n\n        form.classList.add(\"was-validated\");\n        return true;\n    }\n}\n","// import all modules here\nimport { Modal } from \"./modal\";\nimport { Book, User } from \"./models\";\nimport { LibraryService } from \"./services\";\nimport { Validation } from \"./validation\";\n\n// etc.\n\nclass App {\n    private _validation: Validation;\n    private _service: LibraryService;\n    private _modal: Modal;\n\n    constructor() {\n        this._validation = Validation.getInstance();\n        this._service = LibraryService.getInstance();\n        this._modal = Modal.getInstance();\n        this.updateUI();\n\n        const addBookForm = document.forms.namedItem(\n            \"add-book\",\n        ) as HTMLFormElement;\n        const addUserForm = document.forms.namedItem(\n            \"add-user\",\n        ) as HTMLFormElement;\n\n        addBookForm.addEventListener(\"submit\", (e) => {\n            e.preventDefault();\n\n            if (this._validation.validateForm(addBookForm)) {\n                const id = Date.now();\n                const name = addBookForm[\"book-name\"].value;\n                const author = addBookForm[\"book-author\"].value;\n                const releaseYear = parseInt(addBookForm[\"release-year\"].value);\n\n                const book = new Book(id, name, author, releaseYear);\n                this._service.addBook(book);\n\n                addBookForm.reset();\n                addBookForm.classList.remove(\"was-validated\");\n                this.updateUI();\n            }\n        });\n\n        addUserForm.addEventListener(\"submit\", (e) => {\n            e.preventDefault();\n\n            if (this._validation.validateForm(addUserForm)) {\n                const name = addUserForm[\"user-name\"].value;\n                const email = addUserForm[\"user-email\"].value;\n                const id = Date.now(); // Generate a unique ID based on timestamp\n\n                const user = new User(id, name, email);\n                this._service.addUser(user);\n\n                addUserForm.reset();\n                addUserForm.classList.remove(\"was-validated\");\n                this.updateUI();\n            }\n        });\n    }\n\n    updateUI(): void {\n        const returnBook = (book: Book) => {\n            const user = this._service\n                .getUsers()\n                .find((u) => u.getId === book.getBorrower) as User;\n            Object.setPrototypeOf(book, Book.prototype);\n            Object.setPrototypeOf(user, User.prototype);\n            if (user && user.returnBook() && book.isBorrowed()) {\n                book.return();\n\n                this._service.updateBook(book.getId, book);\n                this._service.updateUser(user.getId, user);\n\n                this._modal.show(\n                    `${book.getName} by ${book.getAuthor} (${book.getReleaseYear}) успішно повернена користувачем ${user.getId} ${user.getName} (${user.getEmail}).`,\n                );\n                this.updateUI();\n            } else {\n                this._modal.show(`Не вдалося повернути книгу.`);\n            }\n        };\n\n        const borrowBook = (book: Book) => {\n            this._modal.askId();\n\n            const handleSubmit = (e: Event) => {\n                e.preventDefault();\n                console.log(\"e\");\n\n                const form = e.target as HTMLFormElement;\n                if (this._validation.validateForm(form)) {\n                    const userId = parseInt(\n                        (form[0] as HTMLInputElement).value,\n                    );\n                    const user = this._service.findUser(userId);\n                    if (user) {\n                        Object.setPrototypeOf(book, Book.prototype);\n                        Object.setPrototypeOf(user, User.prototype);\n\n                        if (user && user.borrowBook(book)) {\n                            console.log(\"e\");\n                            this._service.updateBook(book.getId, book);\n                            this._service.updateUser(user.getId, user);\n                            this._modal.show(\n                                `${book.getName} by ${book.getAuthor} (${book.getReleaseYear}) успішно позичена користувачем ${user.getId} ${user.getName} (${user.getEmail}).`,\n                            );\n                            this.updateUI();\n                        } else {\n                            console.log(\"e\");\n                            this._modal.show(\n                                `Не вдалося позичити книгу. Можливо, користувач досяг ліміту позичених книг або книга вже позичена.`,\n                            );\n                        }\n                    } else {\n                        this._modal.show(\"Не вдалося знайти користувача\");\n                    }\n                }\n            };\n\n            const form = document.getElementById(\"borrow-form\");\n            form?.addEventListener(\"submit\", handleSubmit);\n        };\n\n        // update the user interface here\n        const bookList = document.getElementById(\"book-list\") as Element;\n        bookList.innerHTML = \"\";\n        this._service.getBooks().forEach((book) => {\n            Object.setPrototypeOf(book, Book.prototype);\n            const bookItem = document.createElement(\"div\");\n            bookItem.className =\n                \"d-flex justify-content-between align-items-center border-bottom py-3\";\n\n            const bookInfo = document.createElement(\"span\");\n            bookInfo.textContent = `${book.getName} by ${book.getAuthor} (${book.getReleaseYear})`;\n\n            const actionButton = document.createElement(\"button\");\n            actionButton.className = book.isBorrowed()\n                ? \"btn btn-warning\"\n                : \"btn btn-primary\";\n            actionButton.type = \"button\";\n            actionButton.textContent = book.isBorrowed()\n                ? \"Повернути\"\n                : \"Позичити\";\n\n            if (book.isBorrowed()) {\n                actionButton.addEventListener(\"click\", () => returnBook(book));\n            } else {\n                actionButton.addEventListener(\"click\", () => borrowBook(book));\n            }\n\n            bookItem.appendChild(bookInfo);\n            bookItem.appendChild(actionButton);\n            bookList.appendChild(bookItem);\n        });\n\n        const userList = document.getElementById(\"user-list\") as Element;\n        userList.innerHTML = \"\";\n        this._service.getUsers().forEach((user) => {\n            Object.setPrototypeOf(user, User.prototype);\n            userList.innerHTML += `\n                <div class=\"d-flex align-items-center py-3 border-bottom\">\n                    <span>${user.getId} ${user.getName} (${user.getEmail})</span>\n                </div>\n            `;\n        });\n    }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    new App();\n});\n"],"names":["Modal","getInstance","this","_instance","constructor","document","querySelector","style","backgroundColor","show","message","modal","modalContent","createElement","className","modalDialog","modalBody","textContent","modalFooter","button","type","addEventListener","hide","img","src","alt","appendChild","innerHTML","appear","askId","modalHeader","modalTitle","closeButton","setAttribute","borrowForm","noValidate","name","id","inputField","pattern","placeholder","required","cancelButton","saveButton","classList","add","body","display","ariaHidden","ariaModal","role","remove","Book","author","releaseYear","borrower","getId","getName","getAuthor","getReleaseYear","getBorrower","isBorrowed","borrow","borrowerId","User","email","borrowedBooks","getEmail","borrowBook","book","returnBook","Library","arr","_objects","get","obj","push","undefined","index","indexOf","splice","update","oldObj","newObj","search","predicate","find","Storage","set","key","value","localStorage","setItem","getItem","removeItem","clear","LibraryService","storageBooks","JSON","parse","storageUsers","Array","isArray","console","log","_books","_users","window","stringify","getBooks","getUsers","addBook","addUser","user","removeBook","bookName","removeUser","userId","updateBook","oldBookId","newBook","oldBook","updateUser","oldUserId","newUser","oldUser","findBook","findUser","Validation","validateForm","form","reportValidity","App","_validation","_service","_modal","updateUI","addBookForm","forms","namedItem","addUserForm","e","preventDefault","Date","now","parseInt","reset","u","Object","setPrototypeOf","prototype","return","getElementById","target","bookList","forEach","bookItem","bookInfo","actionButton","userList"],"sourceRoot":""}